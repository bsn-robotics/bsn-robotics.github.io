<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" href="style.css" type="text/css">
    <title>Chapter 2 map</title>
  </head>
  <body><page size="A4"><br>
      <h2> 2 Модель неизвестной среды для задачи навигации робота</h2>
      <p>Модель неизвестной среды предполагает следующие допущения: <br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; -
        среда является статичной; <br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; -
        нет движущихся объектов кроме самого робота.<br>
        Данные, полученные с времепролетной камеры и обработанные с помощью
        алгоритмов библиотеки RTAB-MAP (выбранной для работы в результате
        аналитического обзора), представляют собой цветное облако точек в
        декартовых координатах, которые лежат на поверхности объектов
        пространства вокруг робота.</p>
      <p>Цветное облако точек – это множество точек в трехмерном пространстве,
        полученных в результате 3D-сканирования объекта реального мира и
        представляющих поверхность этого объекта. Каждая точка имеет три
        координаты x, y, z&nbsp; и значение цвета в цветовой модели RGB(Red,
        Green, Blue).<!--Вне помещения, солнечный свет ослепляет датчик !--></p>
      <p>Максимальное расстояние до объектов, которое может измерять
        времепролетная камера Microsoft Kinect 2.0, составляет 4,5 м, поэтому
        запись данных производилась в помещении.</p>
      <p>На рисунке 9 представлен вид трехмерной карты, полученной в помещении.<br>
        <img style="width: 419px; height: 385px;" longdesc="9" title="9" alt="9"
          src="img/chapter2_1.png"><br>
        Рисунок 9 – Вид трехмерной карты</p>
      <p>Библиотека RTAB-MAP использует в качестве формата выходных данных
        файловый формат PCD (Point Cloud Data). Этот файл представляет собой
        данные о цветном облаке точек, записанные в памяти компьютера в
        определенной последовательности.<br>
      </p>
      <h3>2.1 Формат хранения облака точек в памяти</h3>
      <p>Каждый файл PCD содержит заголовок, который идентифицирует и
        декларирует определенные свойства данных облаков точек, хранящихся в
        файле. Заголовок из PCD должен быть закодирован в ASCII <a href="source.html#12">[12]</a>.<br>
        В заголовке содержатся следующие ключевые слова и переменные:<br>
        VERSION – определяет версию файла PCD;<br>
        FIELDS – определяет имя каждого измерения;<br>
        &nbsp;&nbsp; &nbsp;FIELDS x y
        z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        # XYZ данные <br>
        &nbsp;&nbsp; &nbsp;FIELDS x y z
        rgb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        # XYZ + цвет<br>
        &nbsp;&nbsp; &nbsp;FIELDS x y z normal_x normal_y
        normal_z&nbsp;&nbsp;&nbsp;&nbsp; # XYZ + нормали к &nbsp;&nbsp;
        &nbsp;поверхности<br>
        &nbsp;&nbsp; &nbsp;FIELDS j1 j2
        j3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        # Момент изображения<br>
        SIZE – определяет размер каждого измерения в байтах;<br>
        TYPE – определяет тип каждого измерения;<br>
        COUNT – определяет, сколько элементов имеет каждое измерение. По
        умолчанию, если COUNT не определен, счетчик всех размеров
        устанавливается в единицу;<br>
        WIDTH – определяет ширину облака точек;<br>
        HEIGHT – определяет высоту облака точек;<br>
        VIEWPOINT – определяет точку обзора;<br>
        POINTS – определяет общее количество точек в облаке;<br>
        DATA – определяет тип данных текстовой или двоичный;<br>
        Далее в файле следуют непосредственно данные, определяющие координаты и
        цвет каждой точки;<br>
        Пример содержимого файла:<br>
        # .PCD v.7 - Point Cloud Data file format<br>
        VERSION .7<br>
        FIELDS x y z rgb<br>
        SIZE 4 4 4 4<br>
        TYPE F F F F<br>
        COUNT 1 1 1 1<br>
        WIDTH 213<br>
        HEIGHT 1<br>
        VIEWPOINT 0 0 0 1 0 0 0<br>
        POINTS 213<br>
        DATA ascii<br>
        0.93773 0.33763 0 4.2108e+06<br>
        0.90805 0.35641 0 4.2108e+06<br>
        0.81915 0.32 0 4.2108e+06<br>
        0.97192 0.278 0 4.2108e+06<br>
        0.944 0.29474 0 4.2108e+06</p>
      <p>Для работы с форматом данных PCD используется библиотека PCL.<br>
        Библиотека PCL (Point Cloud Library) – библиотека для работы с облаком
        точек, предназначенная для обработки 3D геометрии и n-мерного облака
        точек.</p>
      <p>С помощью алгоритмов реализованных RTAB-Map и библиотекой PCL
        <!--PCL или RTAB-Map ?
реализованных библиотекой PCL -->, производится первичная обработка данных на
        трехмерной карте, включающая в себя уменьшение плотности облака точек.
        Анализ множества трехмерных точек весьма ресурсоемкая задача. Для
        ускорения обработки можно сократить число точек в облаке, с минимальной
        потерей информации о сцене.</p>
      <p>Используемая&nbsp; модель облака точек позволяет алгоритму SLAM
        RTAB-Map выполнять локализацию робота в пространстве.</p>
      <p>Для работы алгоритмов поиска пути и планирования траектории движения
        робота используется плоское представление окружающей среды. Чтобы
        получить плоское представление требуется спроецировать облако точек на
        плоскость (см. рисунок 10).</p>
      <p>Рисунок 10 - Проецирование облака точек на плоскость</p>
      <p>Для дальнейшего использования проекция дискретизируется сеткой, с шагом
        0,05 м. </p>
      <p>В результате получается карта занятости, представляющая собой 2D граф
        (см. рисунок 11).</p>
      <p><img style="width: 504px; height: 292px;" longdesc="11" title="11" alt="11"
          src="img/chapter2_2.png"></p>
      <p>Рисунок 11 - 2D граф</p>
      <p><page size="A4"></page></p>
      <p> </p>
      <h3> 2.2 Выводы по разделу</h3>
      <p>&nbsp;&nbsp;&nbsp; см. диссертацию</p>
      <p>&nbsp;&nbsp;&nbsp; Представление карт в виде графа, в свою очередь,
        подразделяется на сетчатые карты занятости (occupancy grid map) и
        топологические. Сетчатая карта представляет среду как матрицу ячеек,
        каждая из которых может быть занята, т.е. робот не может проехать через
        нее, или свободна, где робот может передвигаться. Карта такого типа не
        может абсолютно точно описывать среду, но при достаточно малом размере
        ячейки, она содержит необходимую информацию. Первая реализация карты
        занятости была введена в работе [41] для автоматической генерации карты
        помещения. В данной реализации каждая ячейка карты хранит значение
        вероятности того, что клетка занята. Это позволяет определить
        возможность прохождения робота через каждую ячейку. Специализированные
        алгоритмы поиска маршрута по такой карте будут рассмотрены ниже.
        Топологическая карта помещения представляет собой граф, узлы которого
        соответствуют обособленным местам в помещении (комнатам, коридорам), а
        дуги определяют связность этих областей [55]. Ключевое преимущество
        таких карт заключается в компактности представления. Граф топологии
        строится на основе сетчатой карты заполнения. Основная идея проста, но
        эффективна: свободное пространство карты-сетки разбивается на некоторое
        число областей,30 отделенных друг от друга, так называемыми,
        критическими линиями. Эти линии соответствуют узким проходам, как,
        например, двери. Затем разбитая карта отображается на изоморфный граф.
        Алгоритм выглядит следующим образом: 1) бинаризация карты-сетки; 2)
        построение остова незанятого пространства с помощью диаграммы Вороного;
        3) поиск критических точек, минимизирующих просвет между занятыми
        ячейками;<br>
        4) построение критических линий, соединяющих критические точки;<br>
        5) отображение на граф: каждая область отображается на вершину, а
        критическая линия –<br>
        на дугу графа.<br>
        Ввиду невысокой сложности получаемого графа, для поиска маршрута по
        такой карте можно пользоваться одним из стандартных алгоритмов поиска
        кратчайшего пути на графе. Однако при использовании карты сетки, число
        вершин на несколько порядков выше, и нужно применять специальные
        алгоритмы.</p>
      <p><br>
      </p>
      <p><br>
      </p>
      <p>3D Модель пространства, локализация осуществляется именно по ней</p>
      <p>3Dмодели сопоставляется 2D граф, представляющий собой сетчатую карту
        занятости.</p>
      <p>Она получается путем проецирования на плоскость</p>
      <p>This represents a 2-D grid map, in which each cell represents the
        probability of<br>
        # occupancy</p>
      <p> </p>
      <p><a href="http://docs.ros.org/api/nav_msgs/html/msg/OccupancyGrid.html">http://docs.ros.org/api/nav_msgs/html/msg/OccupancyGrid.html</a></p>
    </page>
  </body>
</html>
