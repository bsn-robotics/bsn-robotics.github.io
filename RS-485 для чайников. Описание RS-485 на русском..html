<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0063)http://masters.donntu.org/2004/fema/kovalenko/library/art7.html -->
<html><script async="" type="text/javascript" src="./RS-485 для чайников. Описание RS-485 на русском._files/2124156.js"></script><script type="text/javascript">window.Ya = window.Ya || {};Ya._metrika = Ya._metrika || {};Ya._metrika.oo = true;</script><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><title>RS-485 для чайников. Описание RS-485 на русском.</title>

<meta content="RS-485 для чайников. Описание RS-485 на русском. RS485, защитное смещение, согласование, защита от сбоев." name="description">
<meta content="RS-485 для чайников Описание RS-485 на русском RS485 защитное смещение согласование защита от 
сбоев" name="keywords"><link href="./RS-485 для чайников. Описание RS-485 на русском._files/mayak-bit.css" type="text/css" rel="stylesheet">
<meta content="MSHTML 6.00.2600.0" name="GENERATOR"></head>
<body bgcolor="#cccccc" background="./RS-485 для чайников. Описание RS-485 на русском._files/paper.jpg">
<br> <p align="center"><a href="http://www.mayak-bit.narod.ru/index.html" target="_parent">http://www.mayak-bit.narod.ru/index.html</a></p>

<br><h1 align="center">RS-485 для чайников</h1>
<p align="center">(c) 2003 Евгений Александрович Бень</p><br>
<br><h2>Содержание</h2>
<ul class="Mayak-bit">
  <li><a href="http://www.mayak-bit.narod.ru/rs485.html#vst">Вступление</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl1">1. Универсальный 
  асинхронный приемопередатчик (UART)</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl2">2. Интерфейс 
  RS-485</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl3">3. Согласование и 
  конфигурация линии связи</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl4">4. Защитное 
  смещение</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl5">5. Исключение 
  приема при передаче в полудуплексном режиме</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl6">6. "Горячее" 
  подключение к линии связи</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl7">7. Рекомендации по 
  организации протокола связи</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl8">8. Программные 
  методы борьбы со сбоями</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl9">9. Защита устройств 
  от перенапряжений</a><a href="http://www.mayak-bit.narod.ru/rs485.html#gl9"> в 
  линии связи </a>
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#gl10">10. Дополнительные 
  меры защиты от помех</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#zkl">Заключение</a> 
  </li><li><a href="http://www.mayak-bit.narod.ru/rs485.html#slk">Полезные ссылки</a> 
  </li></ul>
<h2><a name="vst"></a>Вступление</h2>
<p>Как следует из названия, статья эта - попытка объяснить начинающим что к чему 
и помочь обойти грабли, на которые уже кто-то наступал. Если кто-нибудь, 
потратив 15 минут на прочтение, сэкономит пару дней на отладке системы, я буду 
считать свою задачу выполненной.</p>
<p>Столкнувшись с необходимостью организовать связь между несколькими 
устройствами на базе микроконтроллеров, я стал собирать информацию по этой теме. 
Из конструктивных соображений определился с методом связи - последовательный 
канал и линия связи на основе интерфейса RS-485. Затем последовал отсев излишних 
теоретических рассуждений и отбор практических рекомендаций по наладке линии 
связи. Особое внимание я уделял описанию различных "подводных камней". На 
бумаге, как известно, всегда все работает, а вот на практике вскрываются 
неприятные особенности, притом нигде не описанные. Так и оказалось - сделали все 
по инструкции, а потом не одну неделю отлавливали глюки.</p>
<p>В этой статье я попытался собрать начальную информацию об устройствах, 
полезные добытые сведения (с ссылками) и собственный опыт.</p>
<h2><a name="gl1"></a>1. Универсальный асинхронный приемопередатчик (UART)</h2>
<p>Возможно, связь через асинхронный последовательный порт уходит в прошлое, 
однако сложно найти контроллер, не имеющего в составе своей периферии UART. 
Поэтому хоронить его, думаю, рановато. Раз так, то будет нелишним сказать пару 
слов о том, как оно работает. Описание конкретной реализации последовательного 
порта есть в datasheet на каждый контроллер, поэтому опишу общее для всех.</p>
<p>UART можно разделить на приемник (Receiver) и передатчик (Transmitter). В 
состав UART входят: тактовый генератор связи (бодрейт-генератор), управляющие 
регистры, статусные регистры, буферы и сдвиговые регистры приемника и 
передатчика. Бодрейт-генератор задает тактовую частоту приемопередатчика для 
данной скорости связи. Управляющие регистры задают режим работы 
последовательного порта и его прерываний. В статусном регистре устанавливаются 
флаги по различным событиям. В буфер приемника попадает принятый символ, в буфер 
передатчика помещают передаваемый. Сдвиговый регистр передатчика - это обойма, 
из которой в последовательный порт выстреливаются биты передаваемого символа 
(кадра). Сдвиговый регистр приемника по биту накапливает принимаемые из порта 
биты. По различным событиям устанавливаются флаги и генерируются прерывания 
(завершение приема/отправки кадра, освобождение буфера, различные ошибки).</p>
<p>UART - полнодуплексный интерфейс, то есть приемник и передатчик могут 
работать одновременно, независимо друг от друга. За каждым из них закреплен порт 
- одна ножка контроллера. Порт приемника обозначают RX, передатчика - TX. 
Последовательной установкой уровней на этих портах относительно общего провода 
("земли") и передается информация. По умолчанию передатчик устанавливает на 
линии единичный уровень. Передача начинается посылкой бита с нулевым уровнем 
(старт-бита), затем идут биты данных младшим битом вперед (низкий уровень - "0", 
высокий уровень - "1"), завершается посылка передачей одного или двух битов с 
единичным уровнем (стоп-битов).</p>
<p>Электрический сигнал кадра посылки выглядит так:</p>
<p align="center"><img height="80" alt="Кадр посылки UART" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic01.gif" width="480">&nbsp;<br></p>
<p>Перед началом связи между двумя устройствами необходимо настроить их 
приемопередатчики на одинаковую скорость связи и формат кадра.</p>
<p>Скорость связи или бодрейт (baudrate) измеряется в бодах - число передаваемых 
бит в секунду (включая старт и стоп-биты). Задается эта скорость в 
бодрейт-генераторе делением системной частоты на задаваемый коэффициент. 
Типичный диапазон скоростей: 2400 … 115200 бод.</p>
<p>Формат кадра определяет число стоп-битов (1 или 2), число бит данных (8 или 
9), а также назначение девятого бита данных. Все это зависит от типа 
контроллера.</p>
<p>Приемник и передатчик тактируются, как правило, с 16-кратной частотой 
относительно бодрейта. Это нужно для сэмплирования сигнала. Приемник, поймав 
падающий фронт старт-бита, отсчитывает несколько тактов и следующие три такта 
считывает (семплирует) порт RX. Это как раз середина старт-бита. Если 
большинство значений семплов - "0", старт-бит считается состоявшимся, иначе 
приемник принимает его за шум и ждет следующего падающего фронта. После удачного 
определения старт-бита, приемник точно также семплирует серединки битов данных и 
по большинству семплов считает бит "0" или "1", записывая их в сдвиговый 
регистр. Стоп-биты тоже семплируются, и если уровень стоп-бита не "1" - UART 
определяет ошибку кадра и устанавливает соответствующий флаг в управляющем 
регистре.</p>
<p align="center"><img height="110" alt="Семплирование посылки UART" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic02.gif" width="410">&nbsp;<br></p>
<p>Поскольку бодрейт устанавливается делением системной частоты, при переносе 
программы на устройство с другим кварцевым резонатором, необходимо изменить 
соответствующие настройки UART.</p>
<h2><a name="gl2"></a>2. Интерфейс RS-485</h2>
<p>Интерфейс RS-485 (другое название - EIA/TIA-485) - один из наиболее 
распространенных стандартов физического уровня связи. Физический уровень - это 
канал связи и способ передачи сигнала (1 уровень модели взаимосвязи открытых 
систем OSI).</p>
<p>Сеть, построенная на интерфейсе RS-485, представляет собой приемопередатчики, 
соединенные при помощи витой пары - двух скрученных проводов. В основе 
интерфейса RS-485 лежит принцип дифференциальной (балансной) передачи данных. 
Суть его заключается в передаче одного сигнала по двум проводам. Причем по 
одному проводу (условно A) идет оригинальный сигнал, а по другому (условно B) - 
его инверсная копия. Другими словами, если на одном проводе "1", то на другом 
"0" и наоборот. Таким образом, между двумя проводами витой пары всегда есть 
разность потенциалов: при "1" она положительна, при "0" - отрицательна.</p>
<p align="center"><img height="170" alt="Вид сигналов в линии RS-485" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic03.gif" width="480">&nbsp;<br></p>
<p>Именно этой разностью потенциалов и передается сигнал. Такой способ передачи 
обеспечивает высокую устойчивость к синфазной помехе. Синфазной называют помеху, 
действующую на оба провода линии одинаково. К примеру, электромагнитная волна, 
проходя через участок линии связи, наводит в обоих проводах потенциал. Если 
сигнал передается потенциалом в одном проводе относительно общего, как в RS-232, 
то наводка на этот провод может исказить сигнал относительно хорошо поглощающего 
наводки общего ("земли"). Кроме того, на сопротивлении длинного общего провода 
будет падать разность потенциалов земель - дополнительный источник искажений. А 
при дифференциальной передаче искажения не происходит. В самом деле, если два 
провода пролегают близко друг к другу, да еще перевиты, то наводка на оба 
провода одинакова. Потенциал в обоих одинаково нагруженных проводах изменяется 
одинаково, при этом информативная разность потенциалов остается без 
изменений.</p>
<p>Аппаратная реализация интерфейса - микросхемы приемопередатчиков с 
дифференциальными входами/выходами (к линии) и цифровыми портами (к портам UART 
контроллера). Существуют два варианта такого интерфейса: RS-422 и RS-485.</p>
<p>RS-422 - полнодуплексный интерфейс. Прием и передача идут по двум отдельным 
парам проводов. На каждой паре проводов может быть только по одному 
передатчику.</p>
<p>RS-485 - полудуплексный интерфейс. Прием и передача идут по одной паре 
проводов с разделением по времени. В сети может быть много передатчиков, так как 
они могут отключаются в режиме приема.</p>
<p align="center"><img height="190" alt="Схемы приемопередатчиков RS-422 и RS-485" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic04.gif" width="390">&nbsp;<br></p>
<p class="Mayak_T12">D (driver) - передатчик;<br>R (receiver) - приемник;<br>DI 
(driver input) - цифровой вход передатчика;<br>RO (receiver output) - цифровой 
выход приемника;<br>DE (driver enable) - разрешение работы передатчика;<br>RE 
(receiver enable) - разрешение работы приемника;<br>A - прямой дифференциальный 
вход/выход;<br>B - инверсный дифференциальный вход/выход;<br>Y - прямой 
дифференциальный выход (RS-422);<br>Z - инверсный дифференциальный выход 
(RS-422).</p>
<p>Остановлюсь поподробнее на приемопередатчике RS-485. Цифровой выход приемника 
(RO) подключается к порту приемника UART (RX). Цифровой вход передатчика (DI) к 
порту передатчика UART (TX). Поскольку на дифференциальной стороне приемник и 
передатчик соединены, то во время приема нужно отключать передатчик, а во время 
передачи - приемник. Для этого служат управляющие входы - разрешение приемника 
(RE) и разрешения передатчика (DE). Так как вход RE инверсный, то его можно 
соединить с DE и переключать приемник и передатчик одним сигналом с любого порта 
контроллера. При уровне "0" - работа на прием, при "1" - на передачу.</p>
<p align="center"><img height="150" alt="Соединение микроконтроллера и приемопередатчика" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic05.gif" width="490">&nbsp;<br></p>
<p>Приемник, получая на дифференциальных входах (AB) разность потенциалов 
(U<font size="-2">AB</font>) переводит их в цифровой сигнал на выходе RO. 
Чувствительность приемника может быть разной, но гарантированный пороговый 
диапазон распознавания сигнала производители микросхем приемопередатчиков пишут 
в документации. Обычно эти пороги составляют ± 200 мВ. То есть, когда U<font size="-2">AB</font> &gt; +200 мВ - приемник определяет "1", когда U<font size="-2">AB</font> &lt; -200 мВ - приемник определяет "0". Если разность 
потенциалов в линии настолько мала, что не выходит за пороговые значения - 
правильное распознавание сигнала не гарантируется. Кроме того, в линии могут 
быть и не синфазные помехи, которые исказят столь слабый сигнал.</p>
<p>Все устройства подключаются к одной витой паре одинаково: прямые выходы (A) к 
одному проводу, инверсные (B) - к другому.</p>
<p>Входное сопротивление приемника со стороны линии (R<font size="-2">AB</font>) 
обычно составляет 12 КОм. Так как мощность передатчика не беспредельна, это 
создает ограничение на количество приемников, подключенных к линии. Согласно 
спецификации RS-485 c учетом согласующих резисторов передатчик может вести до 32 
приемников. Однако есть ряд микросхем с повышенным входным сопротивлением, что 
позволяет подключить к линии значительно больше 32 устройств.</p>
<p>Максимальная скорость связи по спецификации RS-485 может достигать 10 
Мбод/сек. Максимальное расстояние - 1200 м. Если необходимо организовать связь 
на расстоянии большем 1200 м или подключить больше устройств, чем допускает 
нагрузочная способность передатчика - применяют специальные повторители 
(репитеры).</p>
<table bordercolor="#000000" cellspacing="1" cellpadding="4" width="75%" align="center" border="1">
  <tbody>
  <tr bordercolor="#000000">
    <td align="middle" width="60%"><b>Стандартные параметры интерфейсов</b></td>
    <td align="middle" width="20%"><b>RS-422</b></td>
    <td align="middle" width="20%"><b>RS-485</b></td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Допустимое число передатчиков / приемников</td>
    <td align="middle" width="20%">1 / 10</td>
    <td align="middle" width="20%">32 / 32</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Максимальная длина кабеля</td>
    <td align="middle" width="20%">1200 м</td>
    <td align="middle" width="20%">1200 м</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Максимальная скорость связи</td>
    <td align="middle" width="20%">10 Мбит/с</td>
    <td align="middle" width="20%">10 Мбит/с</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Диапазон напряжений "1" передатчика</td>
    <td align="middle" width="20%">+2...+10 В</td>
    <td align="middle" width="20%">+1.5...+6 В</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Диапазон напряжений "0" передатчика</td>
    <td align="middle" width="20%">-2...-10 В</td>
    <td align="middle" width="20%">-1.5...-6 В</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Диапазон синфазного напряжения передатчика</td>
    <td align="middle" width="20%">-3...+3 В</td>
    <td align="middle" width="20%">-1...+3 В</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Допустимый диапазон напряжений приемника</td>
    <td align="middle" width="20%">-7...+7 В</td>
    <td align="middle" width="20%">-7...+12 В</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Пороговый диапазон чувствительности приемника</td>
    <td align="middle" width="20%">±200 мВ</td>
    <td align="middle" width="20%">±200 мВ</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Максимальный ток короткого замыкания драйвера</td>
    <td align="middle" width="20%">150 мА</td>
    <td align="middle" width="20%">250 мА</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Допустимое сопротивление нагрузки передатчика</td>
    <td align="middle" width="20%">100 Ом</td>
    <td align="middle" width="20%">54 Ом</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Входное сопротивление приемника</td>
    <td align="middle" width="20%">4 кОм</td>
    <td align="middle" width="20%">12 кОм</td></tr>
  <tr bordercolor="#000000">
    <td width="60%">Максимальное время нарастания сигнала передатчика </td>
    <td align="middle" width="20%">10% бита</td>
    <td align="middle" width="20%">30% бита</td></tr></tbody></table>
<p>&nbsp;</p>
<h2><a name="gl3"></a>3. Согласование и конфигурация линии связи</h2>
<p>При больших расстояниях между устройствами, связанными по витой паре и 
высоких скоростях передачи начинают проявляться так называемые эффекты длинных 
линий. Причина этому - конечность скорости распространения электромагнитных волн 
в проводниках. Скорость эта существенно меньше скорости света в вакууме и 
составляет немногим больше 200 мм/нс. Электрический сигнал имеет также свойство 
отражаться от открытых концов линии передачи и ее ответвлений. Грубая аналогия - 
желоб, наполненный водой. Волна, созданная в одном конце, идет по желобу и, 
отразившись от стенки в конце, идет обратно, отражается опять и так далее, пока 
не затухнет. Для коротких линий и малых скоростей передачи этот процесс 
происходит так быстро, что остается незамеченным. Однако, время реакции 
приемников - десятки/сотни нс. В таком масштабе времени несколько десятков 
метров электрический сигнал проходит отнюдь не мгновенно. И если расстояние 
достаточно большое, фронт сигнала, отразившийся в конце линии и вернувшийся 
обратно, может исказить текущий или следующий сигнал. В таких случаях нужно 
каким-то образом подавлять эффект отражения.</p>
<p>Наука Электротехника предлагает решение этой проблемы. У любой линии связи 
есть такой параметр, как волновое сопротивление Zв. Оно зависит от характеристик 
используемого кабеля, но не от длины. Для обычно применяемых в линиях связи 
витых пар Zв=120 Ом. Оказывается, что если на удаленном конце линии, между 
проводниками витой пары включить резистор с номиналом равным волновому 
сопротивлению линии, то электромагнитная волна дошедшая до "тупика" поглощается 
на таком резисторе. Отсюда его названия - согласующий резистор или 
"терминатор".</p>
<p>Большой минус согласования на резисторах - повышенное потребление тока от 
передатчика, ведь в линию включается низкоомная нагрузка. Поэтому рекомендуется 
включать передатчик только на время отправки посылки. Есть способы уменьшить 
потребление тока, включая последовательно с согласующим резистором конденсатор 
для развязки по постоянному току. Однако, такой способ имеет свои недостатки. 
Для коротких линий (несколько десятков метров) и низких скоростей (меньше 38400 
бод) согласование можно вообще не делать. Подробнее можно почитать в статье <a href="http://www.gaw.ru/html.cgi/txt/interface/rs485/power.htm">"Обрежьте жирок 
с RS-485"</a>.</p>
<p>Эффект отражения и необходимость правильного согласования накладывают 
ограничения на конфигурацию линии связи.</p>
<p>Линия связи должна представлять собой один кабель витой пары. К этому кабелю 
присоединяются все приемники и передатчики. Расстояние от линии до микросхем 
интерфейса RS-485 должно быть как можно короче, так как длинные ответвления 
вносят рассогласование и вызывают отражения.</p>
<p>В оба наиболее удаленных конца кабеля (Zв=120 Ом) включают согласующие 
резисторы Rt по 120 Ом (0.25 Вт). Если в системе только один передатчик и он 
находится в конце линии, то достаточно одного согласующего резистора на 
противоположном конце линии. Более подробно о правильных и неправильных 
конфигурациях сети можно прочитать в статье <a href="http://www.gaw.ru/html.cgi/txt/interface/rs485/app.htm">"Правильная 
разводка сетей RS-485"</a>.</p>
<p align="center"><img height="170" alt="Конфигурация сети" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic06.gif" width="540"><br></p>
<h2><a name="gl4"></a>4. Защитное смещение</h2>
<p>Как уже упоминалось, приемники большинства микросхем RS-485 имеют пороговый 
диапазон распознавания сигнала на входах A-B - ±200мВ. Если |Uab| меньше 
порогового (около 0), то на выходе приемника RO могут быть произвольные 
логические уровни из-за несинфазной помехи. Такое может случиться либо при 
отсоединении приемника от линии, либо при отсутствии в линии активных 
передатчиков, когда никто не задает уровень. Чтобы в этих ситуациях избежать 
выдачи ошибочных сигналов на приемник UART, необходимо на входах A-B 
гарантировать разность потенциалов Uab &gt; +200мВ. Это смещение при отсутствии 
входных сигналов обеспечивает на выходе приемника логическую "1", поддерживая, 
таким образом, уровень стопового бита.</p>
<p>Добиться этого просто - прямой вход (А) следует подтянуть к питанию, а 
инверсный (B) - к "земле". Получается делитель:</p>
<p align="center"><img height="200" alt="Защитное смещение" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic07.gif" width="410"><br></p>
<p class="Mayak_T12">Rвх - входное сопротивление приемника (обычно 12 кОм);<br>Rc 
- согласующие резисторы (120 Ом);<br>Rзс - резисторы защитного смещения.</p>
<p>Величины сопротивлений для резисторов защитного смещения (Rзс) нетрудно 
рассчитать по делителю. Необходимо обеспечить Uab &gt; 200мВ. Напряжение питания 
- 5В. Сопротивление среднего плеча - 120Ом//120Ом//12КОм на каждый приемник - 
примерно 57 Ом (для 10 приемников). Таким образом, выходит примерно по 650 Ом на 
каждый из двух Rзс. Для смещения с запасом - сопротивление Rзс должно быть 
меньше 650 Ом. Традиционно ставят 560 Ом.</p>
<p>Обратите внимание: в расчете номинала Rзс учитывается нагрузка. Если на линии 
висит много приемников, то номинал Rзс дожен быть меньше. В длинных линиях 
передачи необходимо так же учитывать сопротивление витой пары, которое может 
"съедать" часть смещающей разности потенциалов для удаленных от места подтяжки 
устройств. Для длинной линии лучше ставить два комплекта подтягивающих 
резисторов в оба удаленных конца рядом с терминаторами.</p>
<p>Многие производители приемопередатчиков заявляют о функции безотказности 
(failsafe) своих изделий, заключающейся во встроенном смещении. Следует 
различать два вида такой защиты:</p>
<p><u>Безотказность в открытых цепях.</u> (Open circuit failsafe.) В таких 
приемопередатчиках применяются встроенные подтягивающие резисторы. Эти 
резисторы, как правило, высокоомные, чтобы уменьшить потребление тока. Из-за 
этого необходимое смещение обеспечивается только для открытых (ненагруженных) 
дифференциальных входов. В самом деле, если приемник отключен от линии или она 
не нагружена, тогда в среднем плече делителя остается только большое входное 
сопротивление, на котором и падает необходимая разность потенциалов. Однако, 
если приемопередатчик нагрузить на линию с двумя согласующими резисторами по 120 
Ом, то в среднем плече делителя оказывается меньше 60 Ом, на которых, по 
сравнению с высокоомными подтяжками, ничего существенного не падает. Поэтому, 
если в нагруженной линии нет активных передатчиков, то встроенные резисторы не 
обеспечивают достаточное смещение. В этом случае, остается необходимость 
устанавливать внешние резисторы защитного смещения, как это было описано 
выше.</p>
<p><u>Истинная безотказность.</u> (True failsafe.) В этих устройствах смещены 
сами пороги распознавания сигнала. Например: -50 / -200 мВ вместо стандартных 
порогов ±200 мВ. То есть при Uab&gt;-50мВ на выходе приемника RO будет 
логическая "1", а при Uab&lt;-200 - на RO будет "0". Таким образом, и в 
разомкнутой и в пассивной линии при разности потенциалов Uab близкой к нулю, 
приемник выдаст "1". Для таких приемопередатчиков внешнее защитное смещение не 
требуется. Тем не менее, для лучшей помехозащищенности все-таки стоит 
дополнительно немного подтягивать линию.</p>
<p>Сразу виден минус внешнего защитного смещения - через делитель постоянно 
будет протекать ток, что может быть недопустимо в системах малого потребления. В 
таком случае можно сделать следующее:</p>
<p>а). Уменьшить потребление тока, увеличив сопротивления Rзс. Хотя 
производители приемопередатчиков и пишут о пороге распознавания в 200мВ, на 
практике вполне хватает 100мВ и даже меньше. Таким образом, можно сразу 
увеличить сопротивления Rзс раза в два-три. Помехозащищенность при этом 
несколько снижается, но во многих случаях это не критично.</p>
<p>б). Использовать true failsafe приемопередатчики со смещенными порогами 
распознавания. Например, у микросхем MAX3080 и MAX3471 пороги: -50мВ / -200мВ, 
что гарантирует единичный уровень на выходе приемника при отсутствии смещения 
(Uab=0). Тогда внешние резисторы защитного смещения можно убрать или значительно 
увеличить их сопротивление.</p>
<p>в). Не применять без необходимости согласование на резисторах. Если линия не 
будет нагружена на 2 по 120 Ом, то для обеспечения защитного смещения хватит 
подтяжек в несколько килоом в зависимости от числа приемников на линии.</p>
<p>Для опторазвязанной линии подтягивать следует к питанию и "земле" 
изолированной линии. Если не применяется опторазвязка, подтягивать можно к 
любому питанию, так как делитель создаст лишь небольшую разность потенциалов 
между линиями A и B. Нужно только помнить о возможной разности потенциалов между 
"землями" устройств, расположенных далеко друг от друга.</p>
<h2><a name="gl5"></a>5. Исключение приема при передаче в полудуплексном 
режиме</h2>
<p>При работе с полудуплексным интерфейсом RS-485 (прием и передача по одной 
паре проводов с разделением по времени) можно забыть, что UART контроллера - 
полнодуплексный, то есть принимает и передает независимо и одновременно.</p>
<p>Обычно во время работы приемопередатчика RS-485 на передачу, выход приемника 
RO переводится в третье состояние и ножка RX контроллера (приемник UART) 
"повисает в воздухе". В результате, во время передачи на приемнике UART вместо 
уровня стопового бита ("1") окажется неизвестно что, и любая помеха будет 
принята за входной сигнал. Поэтому нужно либо на время передачи отключать 
приемник UART (через управляющий регистр), либо подтягивать RX к единице. У 
некоторых микроконтроллеров это можно сделать программно - активировать 
встроенные подтяжки портов.</p>
<p align="center"><img height="190" alt="Подтяжка приемника UART" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic08.gif" width="450"><br></p>
<p>Примечание: у микроконтроллера AT90S8535 (AVR Atmel) есть глючок - при 
отключенном UART он все равно принимает, и после включения на прием первый 
принятый байт может быть испорчен. Так что активировать подтяжку RX ему нужно 
обязательно.</p>
<h2><a name="gl6"></a>6. "Горячее" подключение к линии связи</h2>
<p>Насколько я знаю, спецификацией RS-485 не предусмотрено "горячее" подключение 
- включение новых приемопередатчиков в линию связи во время работы системы. Тем 
не менее, подобную операцию система переносит практически безболезненно, если 
учесть один нюанс. Это важно, когда питание на устройство подается в момент 
подключения, например, когда плата в виде кассеты вставляется в разъем. Дело в 
том, что во время любого сброса: по включению питания, по сигналу на входе 
"Reset", по срабатыванию сторожевого таймера - контроллеру требуется время на 
инициализацию, которое может составлять до нескольких десятков миллисекунд. Пока 
контроллер находится в состоянии сброса, он принудительно настраивает все порты 
на вход. Получается ситуация, при которой питание на микросхему 
приемопередатчика RS-485 уже подано, но входы разрешения приемника /RE и 
передатчика DE "висят в воздухе". В результате, приемопередатчик может по помехе 
открыться на передачу и все время пока микроконтроллер в отключке пускать в 
работающую линию мусор. Избежать этого легко - достаточно через резистор в 
несколько килоом подтянуть вход разрешения приемника /RE к нулю. Этим 
приемопередатчик сразу по включении питания настраивается на прием и не лезет на 
линию.</p>
<p align="center"><img height="170" alt="Подтяжка управления приемопередатчиком" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic09.gif" width="420"><br></p>
<h2><a name="gl7"></a>7. Рекомендации по организации протокола связи</h2>
<p>На физическом уровне линия связи готова к работе, однако, нужен еще и 
протокол - договоренность между устройствами системы о формате посылок.</p>
<p>По природе интерфейса RS-485 устройства не могут передавать одновременно - 
будет конфликт передатчиков. Следовательно, требуется распределить между 
устройствами право на передачу. Отсюда основное деление: централизованный 
(одномастерный) обмен и децентрализованный (многомастерный).</p>
<p>В централизованной сети одно устройство всегда ведущее (мастер). Оно 
генерирует запросы и команды остальным (ведомым) устройствам. Ведомые устройства 
могут передавать только по команде ведущего. Как правило, обмен между ведомыми 
идет только через ведущего, хотя для ускорения обмена можно организовать 
передачу данных от одного ведомого к другому по команде ведущего.</p>
<p>В децентрализованной сети роль ведущего может передаваться от устройству к 
устройству либо по некоторому алгоритму очередности, либо по команде текущего 
ведущего к следующему (передача маркера ведущего). При этом ведомое устройство 
может в своем ответе ведущему передать запрос на переход в режим ведущего и 
ожидать разрешения или запрета. </p>
<p>Последовательный канал по меркам контроллера - штука медленная. На скорости 
9600 бод передача одного символа занимает больше миллисекунды. Поэтому, когда 
контроллер плотно загружен вычислениями и не должен их останавливать на время 
обмена по UART, нужно использовать прерывания по завершению приема и передачи 
символа. Можно выделить место в памяти для формирования посылки на передачу и 
сохранения принятой посылки (буфер посылки), а также указатели на позицию 
текущего символа. Прерывания по завершению приема или передачи символа вызывают 
соответствующие подпрограммы, которые передают или сохраняют очередной символ со 
сдвигом указателя и проверкой признака конца сообщения, после чего возвращают 
управление основной программе до следующего прерывания. По завершению отправки 
или приема всей посылки либо формируется пользовательский флаг, отрабатываемый в 
основном цикле программы, либо сразу вызывается подпрограмма обработки 
сообщения.</p>
<h2></h2>
<p>В общем случае посылка по последовательному каналу состоит из управляющих 
байтов (синхронизация посылки, адресов отправителя и получателя, контрольной 
суммы и пр.) и собственно байтов данных.</p>
<p>Протоколов существует множество и можно придумать еще больше, но лучше 
пользоваться наиболее употребительными из них. Одним из стандартных протоколов 
последовательной передачи является <a href="http://www.idom.ru/files/Schneider/Info/Networks/MODBUS/Modbus_Rus.Doc">MODBUS</a>, 
его поддержку обеспечивают многие производители промышленных контроллеров. Но 
если Вам нужно буквально "два байта переслать" или просто освоить методы связи и 
не хочется из-за этого изучать систему команд модбаса и писать для него драйвер, 
предлагаю варианты относительно простых протоколов. (И все-таки в дальнейшем 
стоит ориентироваться именно на MODBUS.)</p>
<p>Основная задача в организации протокола - заставить все устройства различать 
управляющие байты и байты данных. К примеру, ведомое устройство, получая по 
линии поток байтов, должно понимать, где начало посылки, где конец и кому она 
адресована.</p>
<p>1). Часто встречаются протоколы на основе ASCII-кода. Управляющие символы и 
данные передаются в виде обыкновенных ASCII символов. Посылка может выглядеть 
так:</p><pre><font face="Courier New, Courier, mono" size="+1">В HEX виде:    3Ah 31h 32h 52h 53h 34h 38h 35h 0Dh
В ASCII виде:  ":" "1" "2" "R" "S" "4" "8" "5" /ПС/</font></pre>
<p>В начале управляющий символ начала посылки ":", следующие две цифры - адрес 
получателя (12), затем символы данных (RS485) и в конце - управляющий символ 
конца посылки 0Dh (перевод строки). Все устройства на линии, приняв символ ":", 
начинают записывать в память посылку до символа конца строки 0Dh. Затем 
сравнивают адрес из посылки со своим адресом. Устройство с совпавшим адресом 
обрабатывает данные посылки, остальные - игнорируют посылку. Данные могут 
содержать любые символы, кроме управляющих (":", 0Dh).</p>
<p>Достоинство этого протокола в удобстве отладки системы и простоте 
синхронизации посылок. Можно через преобразователь RS485-RS232 подключить линию 
к COM-порту компьютера и в любой терминалке увидеть всю проходящую информацию 
"на человеческом языке". Недостатки - относительно большой размер посылки при 
передаче большого количества двоичной информации, ведь на передачу каждого байта 
нужно два ASCII символа (7Fh - "7", "F"). Кроме того, надо преобразовывать 
данные из двоичного вида в ASCII и обратно.</p>
<p>2). Можно организовать протокол с непосредственной передачей двоичных данных. 
При этом управляющие символы и байты данных различаются с помощью настройки 
дополнительного девятого бита в UART. Для управляющих символов этот бит 
устанавливается в "1". Первым в посылке передается управляющий символ с 
единичным девятым битом - остальные его "нормальные" биты могут содержать адрес 
устройства-получателя, признак начала/конца посылки и что-нибудь еще. Затем 
передаются байты данных с нулевым девятым битом. Все принимающие устройства 
узнают по девятому биту управляющий символ и по содержанию его остальных битов 
определяют, кому адресованы последующие данные. Адресуемое устройство принимает 
данные, а все остальные игнорируют их до следующего управляющего символа.</p>
<p>UART некоторых контроллеров, например C167 (Infineon) может в особом режиме 
(wakeup) автоматически распознавать в полученном байте девятый бит и 
генерировать прерывание при получении только управляющего символа. Адресуемое 
устройство при этом нужно переключить в режим обычного приема до следующего 
управляющего символа. Это позволяет остальным устройствам сэкономить время на 
обработке прерываний при получении байтов данных, адресованных не им.</p>
<p>Если требуется сопряжение системы и компьютера с Windows, такой протокол 
лучше не применять, так как у Windows могут быть проблемы с распознанием 
девятого бита в UART. </p>
<p>3) Протокол может быть "чисто" двоичным, то есть без выделения специальных 
управляющих символов. Синхронизация посылок в этом случае может осуществляться 
за счет отслеживания паузы между принятыми байтами. Принимающее устройство 
отсчитывает время с момента последнего приема байта до следующего, и если эта 
пауза оказывается больше какой-то величины (например, 1.5 - 3.5 байта), делается 
вывод о потере предыдущей посылки и начале новой. Даже если предыдущая посылка 
была незакончена - приемный буфер сбрасывается. Можно также синхронизировать 
посылки по уникальной стартовой последовательности байтов (по аналогии со 
стартовым символом в ASCII протоколе). В таких протоколах надо принимать особые 
меры для защиты от приема ложной посылки, начатой из-за помехи.</p>
<h2><a name="gl8"></a>8. Программные методы борьбы со сбоями</h2>
<p>Для повышения надежности связи обязательно нужно предусмотреть программные 
методы борьбы со сбоями. Их можно условно разделить на две группы: защита от 
рассинхронизации и контроль достоверности.</p>
<p><b>1). Защита от рассинхронизации.</b> Несмотря на защитное смещение, сильная 
помеха может пробиться в линию без активных передатчиков и нарушить правильную 
последовательность приема посылок. Тогда возникает необходимость первой же 
нормальной посылкой вразумить принимающие устройства и не дать им принять помеху 
за посылку. Делается это с помощью синхронизации кадров (активная пауза) и 
синхронизации посылок (преамбула).</p>
<p><u>Защита от рассинхронизации кадров.</u> <i>Обязательная мера! Все 
последующие меры синхронизации посылок имеют смысл только совместно с этой.</i> 
Помеха ложным старт-битом может сбить правильный прием кадров последующей 
посылки. Чтобы вернуться к верной последовательности, нужно сделать паузу между 
включением приемопередатчика на передачу и посылкой данных. Все это время 
передатчик удерживает в линии высокий уровень, через который помехе трудно 
пробиться (активная пауза). Паузы длительностью в 1 кадр на данной скорости 
связи (10-11 бит) будет достаточно для того, чтобы любое устройство, принимавшее 
помехи приняло стоп-бит. Тогда следующий кадр будет приниматься с нормального 
старт-бита.</p>
<p align="center"><img height="105" alt="Синхронизация кадра" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic10.gif" width="500"><br></p>
<p>Того же эффекта можно добиться передачей символа FFh перед первым байтом 
посылки, так как кроме старт-бита, все его биты - "1". (Если старт-бит символа 
FFh попадет на стоп-бит ложного кадра, будет просто засчитана ошибка кадра).</p>
<p><u>Защита от рассинхронизации посылок.</u> <i>Применяется совместно с 
предыдущей защитой!</i> Особо подлая помеха может замаскироваться под 
управляющий символ и сбить принимаемую затем посылку. Кроме того предыдущая 
посылка может быть прервана. Из-за этого крайне желательно в подпрограмме приема 
и сохранения данных предусмотреть меры по опознанию настоящего начала посылки и 
сбросу приемного буфера посылки (области памяти, куда сохраняются принимаемые 
байты). Для этого служит преамбула - предварительный признак начала посылки.</p>
<p><i>Стартовый символ.</i> В ASCII протоколе роль преамбулы играет специальный 
управляющий символ начала посылки. По каждому приему такого символа нужно 
сбрасывать буфер: обнулять число принятых байт, перемещать указатель на начало 
буфера и т.п. То же самое нужно делать при переполнении буфера. Это позволит 
настоящему управляющему символу сбросить предыдущую "посылку", начатую ложным 
символом.</p>
<p>Пример. Последний управляющий символ ":" сбросит предыдущую ложную 
посылку:</p>
<p align="center"><font face="Courier New, Courier, mono">____ : ) ____ <b>: 1 2 R 
S 4 8 5 /ПС/</b> ____</font></p>
<p><i>Стартовая пауза.</i> В двоичном протоколе, где не предусмотрен уникальный 
управляющий символ, и синхронизация посылок идет по заданной паузе между 
байтами, достаточно увеличить активную паузу, описанную в синхронизации кадров, 
до длительности паузы между байтами, по которой начинается прием новой посылки. 
То есть, между включением приемопередатчика на передачу и отправкой первых 
байтов посылки нужно сделать паузу длительностью в 1.5 - 3.5 кадра UART. При 
активном передатчике во время такой преамбулы помехе трудно будет прорваться к 
приемникам, они зафиксируют нужную паузу, сбросят буфер посылки и настроятся на 
прием новой посылки. Этот метод применяется, в частности, для протокола MODBUS 
RTU. </p>
<p><i>Стартовая последовательность.</i> Если в двоичном протоколе синхронизация 
осуществляется лишь по корректному началу посылки, то отфильтровать ложную 
посылку можно только по логике ее структуры. Преамбула в данном случае - 
некоторая стартовая последовательность символов, которая не может встретиться в 
данных посылки, и которую вряд ли сформирует помеха. Преамбула отсылается перед 
основной посылкой. Принимающее устройство отслеживает в поступающих данных эту 
стартовую последовательность. Где бы она не состоялась, принимающее устройство 
сбрасывает буфер посылки и начинает принимать новую.</p>
<p>Вариант 1. Посылка начинает заново приниматься после приема "go!" (вместо 
символов могут быть любые 8-битные данные):</p>
<p align="center"><font face="Courier New, Courier, mono">____ : - Ь ___ g o ! 
<b>1 2 R S 4 8 5</b> ____</font></p>
<p>Вариант 2. Посылка начинает заново приниматься после приема <i>не менее</i> 
трех "E" подряд и стартового байта ":" (вместо символов могут быть любые 
8-битные данные):</p>
<p align="center"><font face="Courier New, Courier, mono">____ &gt; : - E ___ E E 
E : <b>1 2 R S 4 8 5</b> ____</font></p>
<p></p>
<p>Даже если до стартовой последовательности было два таких символа подряд, 
посылка начнет сохраняться только за последовательностью из не менее чем трех 
подряд (лишние игнорируются) и стартового символа. Если вместо "Е" использовать 
байт FFh - можно совместить синхронизацию кадров и посылок. Для этого посылаются 
четыре FFh, а принимающее устройство ожидает не менее трех, с учетом того, что 
первый байт FFh может уйти на синхронизацию кадров.</p>
<p><b>2). Контроль достоверности.</b> Особо сильная помеха может вклиниться в 
посылку, исказить управляющие символы или данные в ней, а то и вовсе уничтожить 
ее. Кроме того, одно из подключенных к линии устройств (абонент) может выйти из 
строя и перестать отвечать на запросы. На случай такой беды существуют 
контрольная сумма, тайм-ауты и квитирование.</p>
<p><u>Контрольная сумма</u> - в общем случае 1-2 байта кода, полученного 
некоторым преобразованием из данных посылки. Самое простое - "исключающее или" 
всем байтам данных. Контрольная сумма рассчитывается и включается в посылку 
перед отправкой. Принимающее устройство производит ту же операцию над принятыми 
данными и сверяет рассчитанную контрольную сумму с полученной. Если посылка была 
повреждена, то, скорее всего, они не совпадут. В случае применения ASCII 
протокола - код контрольной суммы также передается ASCII-символами.</p>
<p><u>Тайм-аут</u> - максимальное время ожидания ответа от запрашиваемого 
устройства. Если посылка была повреждена или запрашиваемое устройство вышло из 
строя, то ведущее устройство не повиснет в ожидании ответа, а по истечении 
определенного времени признает наличие сбоя. После чего можно еще пару раз 
повторить запрос и, если сбой повторяется, перейти на отработку аварийной 
ситуации. Тайм-аут отсчитывается с момента завершения передачи запроса. Его 
длительность должна с небольшим запасом превышать максимальное время ответной 
передачи плюс время, необходимое на обработку запроса и формирование ответа. 
Ведомому устройству тоже не помешает отработка тайм-аутов. Особенно в ситуациях, 
когда отсутствие регулярного обновления данных или новых команд от ведущего 
устройства критично для работы устройств системы. Самая простая реализация для 
ведомого - сброс сторожевого таймера по приему посылки. Если по какой-либо 
причине данные перестали поступать - устройство сбросится по переполнению 
сторожевого таймера. После сброса устанавливается безопасный режим до приема 
первой команды.</p>
<p><u>Квитирование</u> - подтверждение доставки (квитанция). Когда важно, чтобы 
ведомый обязательно получил данные или команду, возникает необходимость 
проконтролировать получение им посылки. Ведущее устройство, отправив ведомому 
данные, ждет ответа с подтверждением. Ведомое устройство, получив данные, в 
случае их корректности посылает ответ, подтверждающий доставку. Если по 
истечении тайм-аута ведущее устройство не получает подтверждение, делается вывод 
о сбое в связи или в ведомом устройстве. Дальше обычные меры - повтор посылки. 
Но тут есть нюанс: повреждена и не получена может быть сама квитанция. Ведущее 
устройство, не получив квитанцию, повторяет посылку, и ведомое отрабатывает ее 
повторно. Не всегда это существенно, но если перепосылалась команда типа 
"увеличить параметр на 1" это может привести к незапланированному двойному 
увеличению параметра. В таком случае надо предусмотреть что-нибудь типа 
циклической нумерации посылок, чтобы ведомое устройство отличало повторные 
посылки от новых и не отрабатывало их.</p>
<h2><a name="gl9"></a>9. Защита устройств от перенапряжений в линии связи</h2>
<p>Разность потенциалов между проводниками линии и между линией и "землей" 
приемопередатчика, как правило, не должна выходить за пределы -7...+12 В. 
Следовательно, может потребоваться защита от разности потенциалов между 
"землями" и от перенапряжений из-за замыкания на высоковольтные цепи.</p>
<p><u>Разность потенциалов между "землями".</u> При организации сети на основе 
интерфейса RS-485 следует учитывать неявное присутствие третьего проводника - 
"земли". Ведь все приемопередатчики имеют питание и "землю". Если устройства 
расположены недалеко от начального источника питания, то разность потенциалов 
между "землями" устройств в сети невелика. Но если устройства находятся далеко 
друг от друга и получают местное питание, то между их "землями" может оказаться 
существенная разность потенциалов. Возможные последствия - выход из строя 
приемопередатчика, а то и всего устройства. В таких случаях следует применять 
гальваническую развязку или дренажный провод.</p>
<p>Гальваническая развязка линии и устройств осуществляется либо опторазвязкой 
цифровых сигналов (RO, DI, RE, DE) с организацией изолированного питания 
микросхем приемопередатчиков, либо применением приемопередатчиков со встроенной 
гальванической развязкой сигналов и питания (например, MAX1480). Тогда вместе с 
дифференциальными проводниками прокладываются провод изолированной "земли" 
(сигнальной "земли") и, возможно, провод изолированного питания линии.</p>
<p>Дренажный провод - провод, прокладываемый вместе с витой парой и соединяющий 
"земли" удаленных устройств. Через этот провод уравниваются потенциалы "земель". 
При включении устройства в линию дренажный провод следует подсоединять первым, а 
при отключении - отсоединять последним. Для ограничения тока через дренажный 
провод его заземляют в каждом устройстве через резистор в 100 Ом (0.5 Вт).</p>
<p align="center"><img height="140" alt="Дренажный провод" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic11.gif" width="550"><br></p>
<p><u>Замыкание на высоковольтные цепи.</u> Если существует опасность попадания 
на линию или одну из местных "земель" высокого напряжения, следует применять 
опторазвязку или шунтирующие ограничители напряжения. А лучше и то и другое.</p>
<p>Напряжение пробоя опторазвязанного интерфейса составляет сотни и даже тысячи 
вольт. Это хорошо защищает устройство от перенапряжения, общего для всех 
проводников линии. Однако, при дифференциальных перенапряжениях, когда высокий 
потенциал оказывается на одном из проводников, сам приемопередатчик будет 
поврежден.</p>
<p>Для защиты от дифференциальных перенапряжений все проводники линии, включая 
изолированный общий, шунтируются на локальные "земли" при помощи ограничителей 
напряжения. Это могут быть варисторы, полупроводниковые ограничители напряжения 
и газоразрядные трубки. Физический принцип их действия разный, но суть одна - 
при напряжении выше порогового их сопротивление резко падает, и они шунтируют 
линию. Газоразрядные трубки могут шунтировать очень большие токи, но имеют 
высокий порог пробоя и низкое быстродействие, поэтому их лучше применять по 
трехступенчатой схеме вместе с полупроводниковыми ограничителями. Когда 
заземление линии невозможно, проводники линии шунтируют ограничителями между 
собой. Но это защитит только от дифференциальных перенапряжений - защиту от 
общего должна взять на себя опторазвязка.</p>
<p align="center"><img height="170" alt="Защита от перенапряжений" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic12.gif" width="540"><br></p>
<p>Защита ограничителями напряжения действенна при кратковременных 
перенапряжениях. При длительных - токи короткого замыкания могут вывести 
ограничители из строя, и устройства на линии окажутся без защиты. Для защиты от 
коротких замыканий в линию можно последовательно включить плавкие 
предохранители. Подробнее о защите от перенапряжений можно прочитать в 
руководстве B&amp;B Electronics <a href="http://www.bb-elec.com/bb-elec/literature/tech/485appnote.pdf">"RS-422 and 
RS-485 Application Note"</a> (англ.).</p>
<h2><a name="gl10"></a>10. Дополнительные меры защиты от помех</h2>
<p><u>Диагностика.</u> Если есть возможность выбора маршрута прокладки кабеля с 
замером уровня помех - не стоит ей пренебрегать. Даже если программная коррекция 
ошибок успешно справляется со сбоями, нужно сделать все, чтобы физически снизить 
уровень помех в линии. Полезно предусмотреть в программе диагностический режим, 
в котором накапливалась бы статистика сбоев, отрабатываемых программной 
коррекцией (провал по контрольной сумме или тайм-ауту). Если сбоев слишком 
много, желательно поработать над поиском и устранением их причины. Снижение 
скорости связи (бодрейта) во многих случаях повышает помехоустойчивость. Не 
имеет смысла устанавливать скорость обмена больше, чем необходимо для нормальной 
работы системы, если только не требуется запас на модификацию.</p>
<p><u>Прокладка кабеля.</u> По возможности не следует проводить витую пару вдоль 
силовых кабелей, тем более в общей оплетке, так как существует опасность наводок 
от силовых токов через взаимную индуктивность. Силовое оборудование, 
коммутирующее большие токи, также является источником помех. Сигнальные цепи 
питания оптоизолированной линии лучше не использовать для питания чего-либо еще, 
так как протекающие по сигнальной "земле" лишние токи могут вносить в линию 
дополнительный шум. Некачественная витая пара с асимметричными характеристиками 
проводников - еще один источник проблем. Чем меньше шаг витой пары (чаще 
перевиты провода) - тем лучше. Даже если не применяется опторазвязанная линия 
или дренаж, стоит сразу провести кабель с запасной витой парой - на случай, если 
произойдет обрыв первой или все же понадобится провести сигнальную землю.</p>
<p><u>Экранирование и заземление.</u> В промышленных условиях, тяжелых в плане 
электромагнитного шума, рекомендуется применять экранированный кабель с витой 
парой. Экран, охватывающий проводники линии, защищает их от паразитных емкостных 
связей и внешних магнитных полей. Экран следует заземлять только в одной из 
крайних точек линии. Заземление в нескольких точках недопустимо: из-за разности 
потенциалов местных "земель" по экрану могут протекать существенные токи, 
которые будут создавать наводки на сигнальные проводники. Некоторые разработчики 
рекомендуют для защиты от радиопомех дополнительно включать в нескольких местах 
между экраном и заземлением специальные высокочастотные конденсаторы емкостью 
1...10 нФ. </p>
<p><u>Индуктивные фильтры.</u> Если в линию все же попадают высокочастотные 
помехи, их можно отсеять индуктивными фильтрами. Существуют специальные 
индуктивные фильтры, предназначенные для подавления высокочастотных помех в 
линиях связи. Они последовательно включаются в линию непосредственно у 
приемников. Например, B82790-S**** фирмы Epcos, выполненный в виде 
четырехполюсника, через который витая пара подсоединяется к приемнику.</p>
<p align="center"><img height="120" alt="Дополнительная защита от помех" src="./RS-485 для чайников. Описание RS-485 на русском._files/pic13.gif" width="470"><br></p>
<h2><a name="zkl"></a>Заключение</h2>
<p>Я не претендую на полноту сведений о физических и программных тонкостях связи 
по интерфейсу RS-485. Однако, полагаю, что еще одно изложение темы, немного по 
другому сформулированное, и к тому же дополненное личным опытом не будет лишним 
для разработчиков, только начинающих разбираться в этой области. Надеюсь, 
приведенная информация поможет Вам в организации беспроблемной и надежной 
связи.</p>
<h2><a name="slk"></a>Полезные ссылки</h2>
<p>1. <a href="http://www.gaw.ru/html.cgi/txt/interface/rs485/power.htm">"Обрежьте жирок 
с RS-485"</a><br>Maxim's Application Note 386 (A184, март 2001 года), пер. И.Н. 
Бирюков.<br>http://www.gaw.ru/html.cgi/txt/interface/rs485/power.htm 
(рус)<br>http://www.maxim-ic.com/appnotes.cfm/appnote_number/386 (англ)</p>
<p>2. <a href="http://www.gaw.ru/html.cgi/txt/interface/rs485/app.htm">"Правильная 
разводка сетей RS-485"</a><br>Maxim's Application Note 763 (январь 2001 года), 
пер. И.Н. Бирюков.<br>http://www.gaw.ru/html.cgi/txt/interface/rs485/app.htm 
(рус)<br>http://www.maxim-ic.com/appnotes.cfm/appnote_number/763 (англ) </p>
<p>3. <a href="http://www.cta.ru/pdf/1997-3/note1_1997_3.pdf">"Интерфейсы 
последовательной передачи данных. Стандарты RS-422/RS-485"</a><br>Александр 
Локотков. Журнал "СТА" 
3/97.<br>http://www.cta.ru/pdf/1997-3/note1_1997_3.pdf</p>
<p>4. <a href="http://www.idom.ru/files/Schneider/Info/Networks/MODBUS/Modbus_Rus.Doc">"Описание 
протокола 
MODBUS"</a><br>http://www.idom.ru/files/Schneider/Info/Networks/MODBUS/PI_MBus_300.Pdf 
(англ)<br>http://www.idom.ru/files/Schneider/Info/Networks/MODBUS/Modbus_Rus.Doc 
(рус) <br></p>
<p>5. <a href="http://www.bb-elec.com/bb-elec/literature/tech/485appnote.pdf">"RS-422 and 
RS-485 Application Note"</a><br>B&amp;B Electronics Mfg. Co. Inc (Rev. 
1997)<br>http://www.bb-elec.com/bb-elec/literature/tech/485appnote.pdf 
(англ)</p>
<p>6. <a href="http://dsl.msk.ru/rus/around/dmx512/dmx512.htm">"Руководство по 
применению DMX512"</a> (управление диммерами по RS-485)<br>Adam Bennette. 
Copyright © PLASA 1994. (Пер. АО "ДСЛ" 
1995-97)<br>http://dsl.msk.ru/rus/around/dmx512/dmx512.htm</p>
<p>7. <a href="http://www.maxim-ic.com/appnotes.cfm/appnote_number/723">"Selecting and 
Using RS-232, RS-422, and RS-485 Serial Data Standards"</a><br>Maxim's 
Application Note 
723<br>http://www.maxim-ic.com/appnotes.cfm/appnote_number/723</p>
<p align="center"></p>
<p>8. <a href="http://www.maxim-ic.com/appnotes.cfm/appnote_number/367">"Explanation of 
Maxim RS-485 Features"</a><br>Maxim's Application Note 
367<br>http://www.maxim-ic.com/appnotes.cfm/appnote_number/367</p>
<p>&nbsp;</p>

 <p align="center"><a href="http://www.mayak-bit.narod.ru/index.html" target="_parent">http://www.mayak-bit.narod.ru/index.html</a></p>

<center>
<font size="16px"><a href="http://masters.donntu.org/2004/fema/kovalenko/library/allods/allods.html">начни играть в аллоды онлайн
</a></font>

<p>&nbsp;</p><!-- ><!-- "><!-- '><!-- -->
<div></div>
<style>#bn {
	DISPLAY: block
}
#bt {
	DISPLAY: block
}
</style>

<script language="JavaScript" src="./RS-485 для чайников. Описание RS-485 на русском._files/1x1.gif"></script>
<!-- mailto:spm111@yandex.ru -->
<br>
<br>

<hr width="70%" size="1" color="#B1B1B1">


<div align="center">
<!--<div align="center"> -->

<center>
<table border="0" cellspacing="2">
 <tbody><tr align="center" valign="middle"> 
            <td>
<!-- BEGIN OF PING CODE v5.1 -->
<script language="javascript">//<!--
id="112802155341";img="count30";script="http://counter.topping.com.ua:80/cgi-bin/pinger.cgi";d=document;an=navigator.appName;rf=escape(d.referrer);w="";c="";jv="0";je="u";//-->
</script>
<script language="javascript1.1">//<!--
jv="1";je = (navigator.javaEnabled()?"y":"n");//-->
</script>
<script language="javascript1.2">//<!--
s=screen;w=s.width;an!="Netscape"?c=s.colorDepth:c=s.pixelDepth;jv="2";//-->
</script>
<script language="javascript1.3">//<!--
jv="3";//-->
</script>
<script language="javascript">//<!--
pi="";pi+="\""+script+"?id="+id+"&img="+img+"&w="+w+"&c="+c+"&ref="+rf+"&jsv="+jv+"&jen="+je+"\"";pi="<a href=http://www.topping.com.ua/ target=_blank><img src="+pi+" width=88 height=31 border=0 alt=\"Rated by PING\"></a>";d.write(pi);//-->
</script><a href="http://www.topping.com.ua/" target="_blank"><img src="./RS-485 для чайников. Описание RS-485 на русском._files/pinger.cgi" width="88" height="31" border="0" alt="Rated by PING"></a>
<noscript>
&lt;a href=http://www.topping.com.ua/rating/donetsk/ target=_blank&gt;&lt;img src=http://counter.topping.com.ua:80/cgi-bin/ping.cgi?112802155341;count30 width=88 height=31 border=0 alt="Rated by PING"&gt;&lt;/a&gt;
</noscript>
<!-- END OF PING CODE v5.1 -->
            
            </td>
<td>
<!--Rating@Mail.ru counter-->
<script language="javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer);js=10;//--></script>
<script language="javascript1.1"><!--
a+=';j='+navigator.javaEnabled();js=11;//--></script>
<script language="javascript1.2"><!--
s=screen;a+=';s='+s.width+'*'+s.height;
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth);js=12;//--></script>
<script language="javascript1.3"><!--
js=13;//--></script><script language="javascript" type="text/javascript"><!--
d.write('<a href="http://top.mail.ru/jump?from=407990" target="_top">'+
'<img src="http://d9.c3.b6.a0.top.mail.ru/counter?id=407990;t=56;js='+js+
a+';rand='+Math.random()+'" alt="Рейтинг@Mail.ru" border="0" '+
'height="31" width="88"><\/a>');if(11<js)d.write('<'+'!-- ');//--></script><a href="http://top.mail.ru/jump?from=407990" target="_top"><img src="./RS-485 для чайников. Описание RS-485 на русском._files/counter" alt="Рейтинг@Mail.ru" border="0" height="31" width="88"></a><!-- 
<noscript><a target="_top" href="http://top.mail.ru/jump?from=407990">
<img src="http://d9.c3.b6.a0.top.mail.ru/counter?js=na;id=407990;t=56" 
height="31" width="88" border="0" alt="Рейтинг@Mail.ru"></a></noscript>
<script language="javascript" type="text/javascript"><!--
if(11<js)d.write('--'+'>');//-->
<!--// Rating@Mail.ru counter-->

</td>
          
            <td>
<!-- bigmir)net TOP 100 --><a href="http://top.bigmir.net/show/science/" target="_blank"><script language="javascript"><!--
bmQ='<img src=http://c.bigmir.net/?s38404&t5'
bmD=document
bmD.cookie="b=b"
if(bmD.cookie)bmQ+='&c1'
//--></script><script language="javascript1.2"><!-- 
bmS=screen;bmQ+='&d'+(bmS.colorDepth?bmS.colorDepth:bmS.pixelDepth)+"&r"+bmS.width;
//--></script><script language="javascript"><!--
bmF = bmD.referrer.slice(7);
((bmI=bmF.indexOf('/'))!=-1)?(bmF=bmF.substring(0,bmI)):(bmI=bmF.length);
if(bmF!=window.location.href.substring(7,7+bmI))bmQ+='&f'+escape(bmD.referrer);
bmD.write(bmQ+" border=0 width=88 height=31 alt='bigmir TOP100'>");
//--></script><img src="./RS-485 для чайников. Описание RS-485 на русском._files/saved_resource" border="0" width="88" height="31" alt="bigmir TOP100"></a>
            
            </td>
	<td>
<!--Openstat--><span id="openstat2124156"><a target="_blank" href="http://rating.openstat.ru/site/2124156"><img alt="Openstat" border="0" src="./RS-485 для чайников. Описание RS-485 на русском._files/digits"></a></span><script type="text/javascript">
var openstat = { counter: 2124156, image: 5045, next: openstat }; document.write(unescape("%3Cscript%20src=%22http" +
(("https:" == document.location.protocol) ? "s" : "") +
"://openstat.net/cnt.js%22%20defer=%22defer%22%3E%3C/script%3E"));
</script><script src="./RS-485 для чайников. Описание RS-485 на русском._files/cnt.js" defer="defer"></script><!--/Openstat-->
<!--LiveInternet counter--><script type="text/javascript"><!--
document.write("<a href='//www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t44.6;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet' "+
"border='0' width='1' height='1'><\/a>")
//--></script><a href="http://www.liveinternet.ru/click" target="_blank"><img src="./RS-485 для чайников. Описание RS-485 на русском._files/hit" alt="" title="LiveInternet" border="0" width="1" height="1"></a><!--/LiveInternet-->

</td>
          </tr>
</tbody></table><br>
<!-- </div>
 -->


</center></div></center><style type="text/css">
    /* loading */
    .lt-sk-three-bounce {
      margin: 2px auto;
      width: 100%;
      text-align: center; }
      .lt-sk-three-bounce .lt-sk-child {
        width: 5px;
        height: 5px;
        background-color: #333;
        border-radius: 100%;
        display: inline-block;
        -webkit-animation: lt-sk-three-bounce 1.4s ease-in-out 0s infinite both;
                animation: lt-sk-three-bounce 1.4s ease-in-out 0s infinite both; }
      .lt-sk-three-bounce .lt-sk-bounce1 {
        -webkit-animation-delay: -0.32s;
                animation-delay: -0.32s; }
      .lt-sk-three-bounce .lt-sk-bounce2 {
        -webkit-animation-delay: -0.16s;
                animation-delay: -0.16s; }

    @-webkit-keyframes lt-sk-three-bounce {
      0%, 80%, 100% {
        -webkit-transform: scale(0);
                transform: scale(0); }
      40% {
        -webkit-transform: scale(1);
                transform: scale(1); } }

    @keyframes lt-sk-three-bounce {
      0%, 80%, 100% {
        -webkit-transform: scale(0);
                transform: scale(0); }
      40% {
        -webkit-transform: scale(1);
                transform: scale(1); } }
  </style><div id="SLG_balloon_obj" alt="0" style="display: block;"><div id="SLG_button" class="SLG_ImTranslatorLogo" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/imtranslator-s.png&quot;); display: none;"></div><div id="SLG_shadow_translation_result2" style="display: none;"></div><div id="SLG_shadow_translator"><div id="SLG_planshet"><div id="SLG_arrow_up" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/up.png&quot;);"></div><div style="visibility:hidden;" id="SLG_Bproviders"><div class="SLG_BL_LABLE_ON" title="Google" id="SLG_P0">G</div><div class="SLG_BL_LABLE_ON" title="Microsoft" id="SLG_P1">M</div><div class="SLG_BL_LABLE_ON" title="Translator" id="SLG_P2">T</div></div><div id="SLG_alert_bbl" style="display: none;"><div id="SLHKclose" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/delete.png&quot;);"></div><div id="SLG_alert_cont"></div></div><div id="SLG_TB"><table id="SLG_tables" cellspacing="1"><tr><td class="SLG_td" width="10%" align="right"><input id="SLG_locer" type="checkbox" title="Lock-in language"></td><td class="SLG_td" width="20%" align="left"><select id="SLG_lng_from" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/select.png&quot;) 100% 0px no-repeat rgb(255, 255, 255);"><option value="auto">Detect language</option><option value="af">Afrikaans</option><option value="sq">Albanian</option><option value="ar">Arabic</option><option value="hy">Armenian</option><option value="az">Azerbaijani</option><option value="eu">Basque</option><option value="be">Belarusian</option><option value="bn">Bengali</option><option value="bs">Bosnian</option><option value="bg">Bulgarian</option><option value="ca">Catalan</option><option value="ceb">Cebuano</option><option value="ny">Chichewa</option><option value="zh-CN">Chinese (Simplified)</option><option value="zh-TW">Chinese (Traditional)</option><option value="hr">Croatian</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="eo">Esperanto</option><option value="et">Estonian</option><option value="tl">Filipino</option><option value="fi">Finnish</option><option value="fr">French</option><option value="gl">Galician</option><option value="ka">Georgian</option><option value="de">German</option><option value="el">Greek</option><option value="gu">Gujarati</option><option value="ht">Haitian Creole</option><option value="ha">Hausa</option><option value="iw">Hebrew</option><option value="hi">Hindi</option><option value="hmn">Hmong</option><option value="hu">Hungarian</option><option value="is">Icelandic</option><option value="ig">Igbo</option><option value="id">Indonesian</option><option value="ga">Irish</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="jw">Javanese</option><option value="kn">Kannada</option><option value="kk">Kazakh</option><option value="km">Khmer</option><option value="ko">Korean</option><option value="lo">Lao</option><option value="la">Latin</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="mk">Macedonian</option><option value="mg">Malagasy</option><option value="ms">Malay</option><option value="ml">Malayalam</option><option value="mt">Maltese</option><option value="mi">Maori</option><option value="mr">Marathi</option><option value="mn">Mongolian</option><option value="my">Myanmar (Burmese)</option><option value="ne">Nepali</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="pa">Punjabi</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sr">Serbian</option><option value="st">Sesotho</option><option value="si">Sinhala</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="so">Somali</option><option value="es">Spanish</option><option value="su">Sundanese</option><option value="sw">Swahili</option><option value="sv">Swedish</option><option value="tg">Tajik</option><option value="ta">Tamil</option><option value="te">Telugu</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="uz">Uzbek</option><option value="vi">Vietnamese</option><option value="cy">Welsh</option><option value="yi">Yiddish</option><option value="yo">Yoruba</option><option value="zu">Zulu</option></select></td><td class="SLG_td" width="3" align="center"><div id="SLG_switch_b" title="Switch languages" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/switchb.png&quot;);"></div></td><td class="SLG_td" width="20%" align="left"><select id="SLG_lng_to" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/select.png&quot;) 100% 0px no-repeat rgb(255, 255, 255);"><option value="af">Afrikaans</option><option value="sq">Albanian</option><option value="ar">Arabic</option><option value="hy">Armenian</option><option value="az">Azerbaijani</option><option value="eu">Basque</option><option value="be">Belarusian</option><option value="bn">Bengali</option><option value="bs">Bosnian</option><option value="bg">Bulgarian</option><option value="ca">Catalan</option><option value="ceb">Cebuano</option><option value="ny">Chichewa</option><option value="zh-CN">Chinese (Simplified)</option><option value="zh-TW">Chinese (Traditional)</option><option value="hr">Croatian</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option selected="selected" value="en">English</option><option value="eo">Esperanto</option><option value="et">Estonian</option><option value="tl">Filipino</option><option value="fi">Finnish</option><option value="fr">French</option><option value="gl">Galician</option><option value="ka">Georgian</option><option value="de">German</option><option value="el">Greek</option><option value="gu">Gujarati</option><option value="ht">Haitian Creole</option><option value="ha">Hausa</option><option value="iw">Hebrew</option><option value="hi">Hindi</option><option value="hmn">Hmong</option><option value="hu">Hungarian</option><option value="is">Icelandic</option><option value="ig">Igbo</option><option value="id">Indonesian</option><option value="ga">Irish</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="jw">Javanese</option><option value="kn">Kannada</option><option value="kk">Kazakh</option><option value="km">Khmer</option><option value="ko">Korean</option><option value="lo">Lao</option><option value="la">Latin</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="mk">Macedonian</option><option value="mg">Malagasy</option><option value="ms">Malay</option><option value="ml">Malayalam</option><option value="mt">Maltese</option><option value="mi">Maori</option><option value="mr">Marathi</option><option value="mn">Mongolian</option><option value="my">Myanmar (Burmese)</option><option value="ne">Nepali</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="pa">Punjabi</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sr">Serbian</option><option value="st">Sesotho</option><option value="si">Sinhala</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="so">Somali</option><option value="es">Spanish</option><option value="su">Sundanese</option><option value="sw">Swahili</option><option value="sv">Swedish</option><option value="tg">Tajik</option><option value="ta">Tamil</option><option value="te">Telugu</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="uz">Uzbek</option><option value="vi">Vietnamese</option><option value="cy">Welsh</option><option value="yi">Yiddish</option><option value="yo">Yoruba</option><option value="zu">Zulu</option></select></td><td class="SLG_td" width="5%" align="center"> </td><td class="SLG_td" width="8%" align="center"><div id="SLG_TTS_voice" title="Listen to the translation" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/ttsvoice.png&quot;);"></div></td><td class="SLG_td" width="8%" align="center"><div id="SLG_copy" title="Copy translation" class="SLG_copy" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/copy.png&quot;);"></div></td><td class="SLG_td" width="8%" align="center"><div id="SLG_bbl_font_patch"></div><div id="SLG_bbl_font" title="Font size" class="SLG_bbl_font" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/font.png&quot;);"></div></td><td class="SLG_td" width="8%" align="center"><div id="SLG_bbl_help" title="Help" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/bhelp.png&quot;);"></div></td><td class="SLG_td" width="15%" align="right"><div id="SLG_pin" class="SLG_pin_off" title="Pin pop-up bubble" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/pin-on.png&quot;);"></div></td></tr></table></div></div><div id="SLG_shadow_translation_result" style="visibility: visible;"></div><div id="SLG_loading" class="SLG_loading" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/loading.gif&quot;);"></div><div id="SLG_player2"></div><div id="SLG_alert100">Text-to-speech function is limited to 200 characters</div><div id="SLG_Balloon_options" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/bg3.png&quot;) rgb(255, 255, 255);"><div id="SLG_arrow_down" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/down.png&quot;);"></div><table id="SLG_tbl_opt" width="100%"><tr><td width="5%" align="center"><input id="SLG_BBL_locer" type="checkbox" checked="1" title="Show Translator&#39;s button 3 second(s)"></td><td width="5%" align="left"><div id="SLG_BBL_IMG" title="Show Translator&#39;s button 3 second(s)" style="background: url(&quot;chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/img/util/bbl-logo.png&quot;);"></div></td><td width="70%" align="center"><a href="chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/html/options/options.html?bbl" target="_blank" class="SLG_options" title="Show options">Options</a> : <a href="chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/html/options/options.html?hist" target="_blank" class="SLG_options" title="Translation History">History</a> : <a href="chrome-extension://mchdgimobfnilobnllpdnompfjkkfdmi/content/html/options/options.html?feed" target="_blank" class="SLG_options" title="ImTranslator Feedback">Feedback</a> : <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=GD9D8CPW8HFA2" target="_blank" class="SLG_options" title="Make a small contribution">Donate</a></td><td width="15%" align="right"><span id="SLG_Balloon_Close" title="Close">Close</span></td></tr></table></div></div></div></body></html>