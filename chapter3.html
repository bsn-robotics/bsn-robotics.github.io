<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" href="style.css" type="text/css">
    <title>chapter3</title>
  </head>
  <body> <page size="A4">
      <h1>3 Алгоритмы навигации робота</h1>
      <!--Диссертация 1 глава 3
--><p>В данном разделе работы рассмотрены алгоритмы разработанные для решения
        задачи навигации мобильного робота в неизвестной статической среде при
        автономном картографировании.</p>
      <p>Сформулируем задачу навигации мобильного робота следующим образом.</p>
      <p>Пусть неизвестная среда представляет собой помещение с плоским полом с
        неизвестным расположением стен. Внутри помещения находятся статичные
        препятствия, количество и положение которых неизвестны.</p>
      <p>Пусть мобильный робот, оснащенный времепролетной камерой, расположен в
        помещении в исходной точке и не имеет в памяти данных об окружающей
        среде. С исходной точкой связана система координат. Положение мобильного
        робота в этой же системе координат определяется путем решения задачи
        SLAM.</p>
      <p>Необходимо одновременно:</p>
      <p>- строить 3D карту неизвестного помещения, в виде облака точек, и 2D
        карту помещения, в виде сетчатой карты занятости;</p>
      <p>- определять положение робота на карте;</p>
      <p>- планировать маршрут обхода помещения для картографирования;</p>
      <p style="color: red;">- передвигать мобильный робот вдоль
        запланированного маршрута, избегая столкновения с препятствиями.</p>
      <p>При решении задачи были приняты следующие допущения:</p>
      <p>- в неизвестной среде находятся только статические препятствия,
        подвижных препятствий нет;</p>
      <p>- мобильный робот можно описать габаритной окружностью;</p>
      <p style="color: red;">- приводной уровень системы управления мобильного
        робота отрабатывает заданные линейную и угловую скорости его движения
        без ошибок, при передвижении колеса робота не проскальзывают.</p>
      <p>Данная задача является комплексной, поэтому в работе она разбита на
        подзадачи. Для осуществления навигации робота было предложено
        реализовать следующую последовательность действий, приведенных на
        рисунке 12.</p>
      <p><img title="06" alt="06" src="img/chapter3_06.png"></p>
      <p><br>
      </p>
      <p style="color: red;">Рисунок 12 – Схема действий для осуществления
        навигации робота</p>
      <p><br>
      </p>
      <p>&nbsp;Рассмотрим подробнее назначение каждого элемента предложенной <a
          style="color: red;" href="1">схемы действий</a>.</p>
      <p> </p>
      <p>Находясь в исходной точке, а также при достижении очередной целевой
        точки робот картографирует неизвестную территорию непосредственно вокруг
        себя, путем выполнения разворота на месте на угол 360 градусов.</p>
      <p>Данные с времепролетной камеры поступают на вход алгоритма SLAM. На
        основании результатов проведенного обзора (раздел 1 настоящей работы),
        для использования в схеме действий была выбрана реализация SLAM
        алгоритма RTAB-Map. <a style="color: red;" href="1">RTAB-Map выполняет
          обработку данных с камеры, формирует 3D карту, выполняет локализацию
          робота на ней (см. пункт 3.1 раздела).</a></p>
      <p>На следующем шаге выполняется перевод 3D карты в 2D граф <a style="color: red;"
          href="1">(см. пункт 3.2 раздела).</a> Такое преобразование требуется
        для выполнения следующих шагов, поскольку алгоритмы обхода графа, поиска
        пути и планирования траектории используют плоскую модель неизвестной
        среды.</p>
      <p>Алгоритм обхода графа определяет очередную целевую точку, узел 2D
        графа, в который ему следует переместиться, чтобы исследовать
        неизвестную среду.</p>
      <p>Координаты целевой точки поступают на вход алгоритма поиска пути к
        целевой точке, который строит кратчайший путь к целевой точке в виде
        последовательности узлов 2D графа. После чего робот, используя алгоритмы
        планирования траектории и формирования команд на движения, перемещается
        в координаты на карте, соответствующие целевой точке. Положение робота
        относительно карты на всём пути следования к целевой точке определяется
        с помощью визуальной одометрии вычисляемой алгоритмом RTAB-Map.
        Построение 3D карты и 2D графа происходит одновременно с исследованием
        неизвестной среды.</p>
      <p>Далее робот циклически выполняет заданную последовательность действий,
        пока не останется новых целевых точек.</p>
      <h3> 3.1 SLAM алгоритм RTAB-Map</h3>
      <p>Задача SLAM решается c помощью реализации RTAB-Map.<br>
        RTAB-Map "сшивает" облако точек, поступающее с времепролетной камеры
        Kinect 2.0, в 3D карту. Это достигается за счет использования детектора
        и дескриптора ключевых точек, а также детектора замыкания петель (см.
        раздел 1 настоящей работы). </p>
      <p>Работу SLAM алгоритма RTAB-Map можно представить как выполнение
        следующей последовательности действий:</p>
      <p>- нахождение ключевых точек в пространстве;</p>
      <p>- поиск соответствий между ключевыми точками;</p>
      <p>- пересчет положения робота;</p>
      <p>- уточнение положения ключевых точек на 3D карте.</p>
      <p>Общая схема работы алгоритма RTAB-Map приведена на рисунке 13.</p>
      <p><img title="08" alt="08" src="img/chapter3_08_slam.png"></p>
      <p><br>
      </p>
      <p>Рисунок 13 - Общая схема алгоритма RTAB-Map </p>
      <!--Диссертация 4 стр 9-->
      <p><br>
      </p>
      <p>Данный алгоритм является итеративным, то есть в каждый момент времени
        текущая оценка положения мобильного робота зависит от предыдущей. В
        основе алгоритмов такого типа лежит сопоставление двух последовательных
        снимков, при этом вычисляется смещение мобильного робота относительно
        предыдущего положения.</p>
      <p>На первом шаге алгоритма на вход подаются данные с времепролетной
        камеры. По этим данным в пространстве находятся ключевые точки и
        определяются их описания, необходимые для поиска соответствий. В
        процессе работы строится структура, которая хранит ключевые точки и их
        описания. Затем для каждой обнаруженной ключевой точки ищется
        соответствие в этой структуре. Если соответствие не найдено, то ключевая
        точка просто добавляется в структуру. Если же было обнаружено
        соответствие, то ключевая точка используется для вычисления положения
        робота <a href="source.html#3_01">[14]</a>.<page size="A4"></page></p>
      <!--Диссертация 2 конец-->
      <h3> 3.2 Алгоритм перевода 3D карты в 2D граф</h3>
      <p>Данный алгоритм подробнее рассмотрен в разделе 2 настоящей работы.<br>
      </p>
      <p>Для перевода 3D карты в 2D граф, необходимо спроецировать облако точек,
        составляющее 3D карту, на плоскость, проходящую на уровне расположения
        камеры перпендикулярно оси Z 3D карты.<br>
        Все объекты находящиеся ниже плоскости, считаются свободным участком.
        Объекты, пересекающие плоскость и находящиеся выше неё считаются
        препятствием. Шаг сетки графа, генерируемого RTAB-Map равен 0.05 м.<br>
      </p>
      <h3>3.3 Алгоритм обхода 2D графа</h3>
      <p><!--Целевые точки
Предложенный алгоритм планирования пути содержит в себе систему хранения и воспроизведения 2D карты помещения.-->Для
        обхода графа логично использовать алгоритм обхода графа в глубину [].
        Однако классический алгоритм обхода графа в глубину не применим
        для&nbsp;задачи обхода графа, представляющего собой сетчатую карту
        занятости, рассмотренную выше, поскольку не учитывает габариты робота, и
        предполагает, что робот занимает одну клетку графа. В действительности,
        разработанная робототехническая платформа занимает на графе область
        размером 12x12 клеток, при размере сетки графа 0,05 м.<!--А радиус обзора составляет 72 клетки.--></p>
      <p>Для решения задачи обхода графа<!--выбора смещения робота--> была
        разработана модификация алгоритма обхода графа в глубину для сетчатой
        карты занятости, учитывающая габариты робота.</p>
      <p>На каждой итерации алгоритма выполняется поиск целевого узла на 2D
        графе. <a style="color: red;" href="%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB+1+%D0%BD%D0%B0%D1%81%D1%82%D0%BE%D1%8F%D1%89%D0%B5%D0%B9+%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B">Целевым
          узлом 2D графа является клетка на карте, в которой должен оказаться
          верхний левый угол робота при достижении роботом целевой точки.</a>
        После достижения целевого узла робот разворачивается на месте на угол
        360 градусов, чтобы сделать снимки окружающей среды с других ракурсов.</p>
      <p>Общая схема работы алгоритма обхода 2D графа представлена на рисунке
        14.</p>
      <p><img title="05" alt="05" src="img/chapter3_05.png"> </p>
      <p> Рисунок 14 - Схема алгоритма обхода 2D графа</p>
      <p><br>
      </p>
      <p>Рассмотрим подробнее каждый шаг работы алгоритма. Для примера,
        рассмотрим случай, когда робот занимает <a style="color: red;" href="1">на
          графе область 2x2 </a>клетки (см. рисунок 15).</p>
      <p>На рисунке серым цветом обозначена неизвестная территория, черным -
        препятствия, белым свободные участки. Позиция робота отмечена красным
        квадратом.</p>
      <p><br>
      </p>
      <p><br>
      </p>
      <p><img style="width: 486px; height: 333px;" title="02" alt="02" src="img/chapter3_02.png"></p>
      <p>Рисунок 15 - Алгоритм в процессе работы</p>
      <p><br>
      </p>
      <p>На очередном вызове алгоритма обхода графа, после того как робот достиг
        целевого узла и развернулся на месте на 360 градусов, на вход алгоритма
        обхода графа поступает 2D граф и позиция робота относительно графа.</p>
      <p style="color: red;">На первом этапе на графе выделяется квадратный
        участок вокруг позиции робота размером R x R клеток. В рассматриваемом
        случае R = 10.</p>
      <p>На втором этапе в пределах этого участка выполняется поиск возможных
        смещений робота без рассчета, сможет ли робот попасть в это смещение
        учитывая габариты робота. На рисунке 15 возможные смещения робота
        обозначены зеленым и синим цветами (клетка помечается если в ней может
        оказаться левый верхний край робота, так чтобы положение робота не
        накладывалось на препятствие).</p>
      <p>На третьем этапе выполняется поиск среди возможных смещений робота,
        достижимых с учётом габаритов робота. На рисунке 15 такие смещения
        отмечены зеленым цветом. Для этого используется алгоритм "построчный
        заливки с затравкой" (Scanline Floodfill Algorithm) <a href="source.html#13_1">[13]</a>.
        Схема работы алгоритма приведена на рисунке 17.</p>
      <p><img title="07" alt="07" src="img/chapter3_07_fill.png"></p>
      <p>Рисунок 17 - Схема работы построчного алгоритма заливки с затравкой</p>
      <p>На четвертом этапе работы алгоритма обхода графа выполняется выбор
        смещения (выбор целевого узла) из полученного на предыдущем этапе набора
        возможных смещений. Выбор осуществляется с помощью модифицированного
        алгоритма обхода графа в глубину. Схема алгоритма представлена на
        рисунке 18.</p>
      <p><img style="width: 609px; height: 1071px;" title="09" alt="09" src="img/chapter3_09_depthWay.png"></p>
      <p>Рисунок 18 - Упрощенная схема модифицированного алгоритма обхода графа
        в глубину</p>
      <p><br>
      </p>
      <p>Текущая позиция робота и возможные смещения робота из текущей позиции
        при каждом срабатывании алгоритма записываются в стек.</p>
      <p>Алгоритм обхода графа будет выдавать целевую узел графа для
        перемещения, пока счетчик целевых узлов не станет отрицательным, т.е.
        пока не останется неизвестных зон на 2D графе, имеющих общее ребро с
        узлом 2D графа, отмеченного как свободный участок. В исходной точке
        (исходном узле), счетчик целевых узлов имеет значение - ноль.</p>
      <p>Алгоритм работы обхода 2D графа был протестирован на эталонной карте
        занятости. В результате работы алгоритма была получена карта совпадающая
        с эталонной, что подтверждает корректную работу алгоритма (см. рисунок
        19).</p>
      <p><br>
      </p>
      <p><img style="width: 549px; height: 326px;" title="04" alt="04" src="img/chapter3_04.png">
      </p>
      <p>Рисунок 19 - Эталонная карта занятости (слева) и карта, получаемая в
        результате работы алгоритма (справа)</p>
      <h3>3.4 Выводы по третьему разделу</h3>
      <p>Таким образом, в третьем разделе было рассмотрено решение задачи
        навигации мобильного робота в неизвестной статической среде при
        автономном картографировании и были получены следующие результаты:</p>
      <p>1. Предложена последовательность действий для осуществеления навигации
        мобильного робота в неизвестной среде.</p>
      <p>2. Разработан и протестирован алгоритм обхода 2D графа, задающий
        целевые точки на карте и позволяющий роботу автономно картографировать
        неизвестную среду.</p>
    </page>
  </body>
</html>
